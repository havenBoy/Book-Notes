# 第 3 章 函数

## 3.1 短小
　　函数的第一规则是要短小。第二规则是还要更短小。
**代码块和缩进**
　　if 语句、 else 语句、 while 语句等，其中的代码块应该只有一行。该行大抵应该是一个函数调用语句。这样不但能保持函数短小，而且，因为块内调用的函数拥有较具说明性的名称，从而增加了文档上的价值。
　　这也意味着函数不应该大到足以容纳嵌套结构。所以，函数的缩进层次级不该多于一层或两层。当然，这样的函数易于阅读和理解。

## 3.2 只做一件事
　　函数应该做一件事。做好这件事。只做这一件事。
　　如果函数只是做了该函数名下同一抽象层上的步骤，则函数还是只做了一件事。编写函数毕竟是为了把大一些的概念（换言之，函数的名称）拆分为另一抽象层上的一系列步骤。
　　要判断函数是否不止做了一件事，还有一个方法，就是看是否能再拆出一个函数，该函数不仅只是单纯地重新诠释其实现。
**函数中的区段**
　　只做一件事的函数无法被合理地切分为多个区段。

## 3.3 每个函数一个抽象层级
**自顶向下读代码：向下规则**
　　我们想要让代码拥有自顶向下的阅读顺序。我们想要让每个函数后面都跟着位于下一个抽象层级的函数，这样一来，在查看函数列表时，就能循抽象层级向下阅读了。我把这叫做向下规则。
　　换一种说法。我们想要这样读程序：程序就像是一系列 TO 起头的段落，每一段都描述当前抽象层级，并引用位于下一个抽象层级的后续 TO 起头段落。
　　这是保持函数短小、确保只做一件事的要诀。让代码读起来像是一系列自顶向下的 TO 起头段落是保持抽象层级协调一致的有效技巧。

## 3.4 switch 语句
　　对于 switch 语句，我的规矩是如果只出现一次，用于创建多态对象，而且隐藏在某个继承关系中，在系统其它部分看不到，就还能忍受。当然也要就事论事，有事我也会部分或全部违反这条规矩。

## 3.5 使用描述性的名称
　　沃德原则：“如果每个例程都让你感到深合己意，那就是整洁代码。”要遵循这一原则，泰半工作都在于为只做一件事的小函数取个好名字。函数越短小、功能越集中，就越便于取个好名字。
　　别害怕长名称。长而具有描述性的名称，要比短而令人费解的名称好。长而具有描述性的名称，要比描述性的长注释好。使用某种命名约定，让函数名称中的多个单词容易阅读，然后使用这些单词给函数取个能说清其功用的名称。
　　选择描述性的名称能理清你关于模块的设计思路，并帮你改进之。追索好名称，往往导致对代码的改善重构。
　　命名方式要保持一致。使用与模块名一脉相承的短语、名词和动词给函数命名。

## 3.6 函数参数
　　最理想的参数数量是零（零参数函数），其次是一（单参数函数），再次是二（双参数函数），应尽量避免三（三参数函数）。有足够特殊的理由才能用三个以上参数（多参数函数）--所以无论如何也不要这么做。

#### 3.6.1 一元函数的普通形式
　　向函数传入单个参数有两种极普遍的理由。一种是得到参数的属性，返回参数的状态，如 `boolean fileExists("MyFile")`。也可能是操作该参数，将其转换为其他什么东西，再输出之，如`InputStream fileOpen("MyFile")`。应当选用较能区分这两种理由的名称，而且总在一致的上下文中使用这两种形式。
　　还有一种虽不那么普遍但仍极有用的单参数函数形式，那就是事件（event）。在这种形式中，有输入参数而无输出参数。程序将函数看作是一个事件，使用该参数修改系统状态。小心使用这种形式。应该让读者很清楚地了解它是个事件。谨慎地选用名称和上下文语境。
　　尽量避免编写不遵循这些形式的一元函数。
　　对于转换，使用输出参数而非返回值令人迷惑。如果函数要对输入参数进行转换操作，转换结果就该体现为返回值。

#### 3.6.2 标识参数











