# 第 5 章 格式
　　你应该保持良好的代码格式。你应该选用一套管理代码格式的简单规则，然后贯彻这些规则。如果你在团队中工作，则团队应该一致同意采用一套简单的格式规则，所有成员都要遵从。使用能帮你应用这些格式规则的自动化工具会很有帮助。

## 5.1 格式的目的
　　代码格式很重要。代码格式不可忽略，必须严肃对待。代码格式关乎沟通，而沟通是专业开发者的头等大事。

## 5.2 垂直格式
　　用大多数为 200 行、最长 500 行的单个文件构造出色的系统。尽管这并非不可违背的原则，也应该乐于接受。短文件通常比长文件易于理解。

#### 5.2.1 向报纸学习
　　源代码也要像报纸那样。名称应当简单且一目了然。名称本身应该足够告诉我们是否在正确的模块中。源文件最顶部应该给出高层次概念和算法。细节应该往下渐次展开，直至找到源文件中最底层的函数和细节。

#### 5.2.2 概念间垂直方向上的区隔
　　几乎所有的代码都是从上往下读，从左往右读。每行展现一个表达式或一个子句，每组代码行展示一条完整的思路。这些思路用空白行区隔开来。
　　在封包声明、导入声明和每个函数之间，都有空白行隔开。这条及其简单的规则极大地影响到代码的视觉外观。每个空白行都是一条线索，标识出新的独立概念。往下读代码时，你的目光总会停留于空白行之后那一行。

#### 5.2.3 垂直方向上的靠近
　　如果说空白行隔开了概念，靠近的代码行则暗示了它们之间的紧密关系。所以，紧密相关的代码应该相互靠近。

#### 5.2.4 垂直距离
　　关系密切的概念应该相互靠近。显然，这条规则并不适用于分布在不同文件中的概念。除非有很好的理由，否则就不要把关系密切的概念放到不同的文件中。实际上，这也是避免使用 protected 变量的理由之一。
　　对于那些关系密切、放置于同一源文件中的概念，他们之间的区隔应该成为对相互的易懂度有多重要的衡量标准。应避免迫使读者在源文件和类中跳来跳去。
　　**变量声明。**变量声明应尽可能靠近其使用位置。因为函数很短，本地变量应该在函数的顶部出现。
　　循环中的控制变量应该总是在循环语句中声明。
　　偶尔，在较长的函数中，变量也可能在某个代码块顶部，或在循环之前声明。
　　**实体变量**应该在类的顶部声明。这应该不会增加变量的垂直距离，因为在设计良好的类中，它们如果不是被该类的所有方法也是大多数方法所用。
　　**相关函数。**若某个函数调用了另外一个，就应该把它们放在一起，而且调用者应该尽可能放在被调用者上面。这样，程序就有个自然的顺序。若坚定地遵循这条约定，读者将能够确信函数声明总会在其调用后很快出现。
　　**概念相关。**概念相关的代码应该放在一起。相关性越强，彼此之间的距离就该越短。
　　相关性应建立在直接依赖的基础上，如函数间调用，或函数使用某个变量。但也有其他相关性的可能。相关性可能来自于执行相似操作的一组函数（相同的函数名称，执行同一基础任务的函数）。

#### 5.2.5 垂直顺序
　　一般而言，我们想自上向下展示函数调用依赖的顺序。也就是说，被调用的函数应该放在执行调用的函数下面。这样就建立了一种自顶向下贯穿源代码模块的良好信息流。

## 5.3 横向格式
　　应该尽力保持代码行短小。死守 80 个字符的上限有点僵化，而且也不反对代码行长度达到 100 个字符或 120 个字符。再多的话，大抵就是肆意妄为了。

#### 5.3.1 水平方向上的区隔与靠近
　　我们使用空格字符将彼此紧密相关的事物连接到一起，也用空格字符把相关性较弱的事物分隔开。
　　在赋值操作符周围加上空格字符，以此达到强调目的。赋值语句有两个确定而重要的要素：左边和右边。空格字符加强了分隔效果。
　　另一方面，我不在函数名和左圆括号之间加空格。这是因为函数与其参数密切相关，如果隔开，就会显得互无关系。我把函数调用括号中的参数一一隔开，强调逗号，表示参数是互相分离的。
　　空格字符的另一种用法是强调其前面的运算符。
　　乘法因子之前没加空格，因为它们具有较高优先级。加减法运算项之间用空格隔开，因为加法和减法优先级较低。

#### 5.3.2 水平对齐
　　对齐并没有什么用，如果有较长的列表需要做对齐处理，那么问题就是在列表的长度上而不是对齐上。

#### 5.3.3 缩进





